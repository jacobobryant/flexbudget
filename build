#!/bin/bash
set -x
set -e

function repl {
  export GOOGLE_APPLICATION_CREDENTIALS=~/dev/bud/backend/firebase-key.json
  export DATOMIC_ENV_MAP="$(cat env.edn)"
  clj -A:dev -e "(do (nrepl) (go))" -r
}

function push {
  #clojure -A:dev -m datomic.ion.dev "{:op :push :uname \"$(uuidgen)\"}"
  clojure -A:dev -m datomic.ion.dev "{:op :push}"
}

function proxy {
  datomic-socks-proxy bud
}

cmd="$1"
shift
$cmd "$@"
